var app=angular.module("myApp",[]);app.config(["$routeProvider",function(a){a.when("/linhas",{templateUrl:"lista.html",controller:"LinhasController"}).when("/linha/:numero",{templateUrl:"linha.html",controller:"LinhaController"}).otherwise({redirectTo:"/linhas"})}]);app.run(function(a,c){var b=[];a.$on("$routeChangeSuccess",function(){b.push(c.$$path)});a.back=function(){var d=b.length>1?b.splice(-2)[0]:"/";c.path(d)}});app.controller("LinhasController",function(a,b){a.input={};a.removerAcentos=function(f){var d={a:/[\xE0-\xE6]/g,A:/[\xC0-\xC6]/g,e:/[\xE8-\xEB]/g,E:/[\xC8-\xCB]/g,i:/[\xEC-\xEF]/g,I:/[\xCC-\xCF]/g,o:/[\xF2-\xF6]/g,O:/[\xD2-\xD6]/g,u:/[\xF9-\xFC]/g,U:/[\xD9-\xDC]/g,c:/\xE7/g,C:/\xC7/g,n:/\xF1/g,N:/\xD1/g,};for(var c in d){var e=d[c];f=f.replace(e,c)}f=f.toLowerCase();f=f.replace(/[^a-z0-9\-]/g," ");f=f.replace(/ {2,}/g," ");f=f.trim();return f};a.busca=function(){var d=a.input.saida;var c=a.input.chegada;if((typeof d==="undefined")||(d=="")){d="all"}if((typeof c==="undefined")||(c=="")){c="all"}d=a.removerAcentos(d);c=a.removerAcentos(c);b.get("http://localhost:4567/linhas/"+d+"/"+c).success(function(g,e,h,f){a.linhas=g;if(g==""){alert("Não foram encontradas rotas entre os endereços.")}}).error(function(g,e,h,f){console.log("Erro ao obter dados da rota")})}});app.controller("LinhaController",function(a,c,b){c.get("http://localhost:4567/linha/"+b.numero).success(function(f,d,g,e){a.linha=f}).error(function(f,d,g,e){console.log("Erro ao obter dados da rota")})});